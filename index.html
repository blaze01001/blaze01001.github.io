<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Тимур, нажми на кнопку</title>
<style>
    *, *::before, *::after { box-sizing: border-box; }
    html, body {
        height: 100%;
        margin: 0;
        /* Исходный фон через CSS-переменную */
        --bg-url: url('https://tenor.com/ru/view/jungwon-jungwon-dancing-jungwon-tung-sahur-jungwon-sahur-jw-sahur-gif-15353997465509145460');
        background: #0f1020 var(--bg-url) center center / cover no-repeat fixed;
        color: #fff;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        overflow: hidden;
        transition: background-image 0.5s ease;
    }
    .center {
        position: absolute; inset: 0;
        display: flex; align-items: center; justify-content: center; z-index: 2;
    }
    button {
        padding: 16px 24px; font-size: 18px; border: none; border-radius: 12px;
        background: #ffffff; color: #1a1b35; cursor: pointer;
        box-shadow: 0 10px 30px rgba(0,0,0,.25);
        transition: transform .1s ease, box-shadow .2s ease;
    }
    button:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    button:active { transform: translateY(1px) scale(0.99); }
    #flash {
        position: fixed; inset: 0; background: #fff; opacity: 0;
        pointer-events: none; z-index: 1; transition: opacity .12s ease;
    }
    #flash.active { opacity: .25; }
    .particle {
        position: fixed; left: 0; top: 0; font-size: 18px;
        filter: drop-shadow(0 0 6px rgba(255,77,166,.6)); pointer-events: none;
        animation: fly var(--dur) ease-out forwards; will-change: transform, opacity;
    }
    @keyframes fly {
        0% { transform: translate(0, 0) scale(.4) rotate(0deg); opacity: 0; }
        12% { opacity: 1; }
        100% { transform: translate(var(--dx), var(--dy)) scale(1) rotate(var(--rot)); opacity: 0; }
    }
    body::before {
        content: ""; position: fixed; inset: -20%;
        background: radial-gradient(80% 80% at 50% 20%, #1a1b35, #0f1020);
        z-index: 0;
    }
    @media (prefers-reduced-motion: reduce) { .particle { animation-duration: 600ms !important; } }
</style>
</head>
<body>
<div id="flash"></div>
<div class="center">
    <button id="startBtn" type="button">Тимур, нажми на кнопку</button>
</div>

<audio id="sound1" src="https://www.myinstants.com/media/sounds/imbo-otryzhka.mp3" preload="auto"></audio>
<audio id="sound2" src="https://www.myinstants.com/media/sounds/italian-brainrot-ringtone.mp3" preload="auto"></audio>
<audio id="sound3" src="https://www.myinstants.com/media/sounds/akh-diadia-sasha-ne-tak-gluboko.mp3" preload="auto"></audio>

<!-- Встраивание гифки от Tenor -->
<div class="tenor-gif-embed" data-postid="15353997465509145460" data-share-method="host" data-aspect-ratio="1" data-width="100%">
    <a href="https://tenor.com/view/jungwon-jungwon-dancing-jungwon-tung-sahur-jungwon-sahur-jw-sahur-gif-15353997465509145460">Jungwon Jungwon Dancing GIF</a> from <a href="https://tenor.com/search/jungwon-gifs">Jungwon GIFs</a>
</div>
<script type="text/javascript" async src="https://tenor.com/embed.js"></script>

<script>
    const btn = document.getElementById('startBtn');
    const flash = document.getElementById('flash');
    const sound1 = document.getElementById('sound1');
    const sound2 = document.getElementById('sound2');
    const glyphs = ['卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐', '卐'];
    let running = false;
    let burstTimer = null;

    // Сохраняем исходный фон из CSS-переменной
    const rootStyle = document.documentElement.style;
    const originalBg = getComputedStyle(document.documentElement).getPropertyValue('--bg-url').trim();

    // Ссылка на новую гифку, которая появится при нажатии
    const newBgUrl = "url('https://media.tenor.com/images/7f8e7c0d6c2e7e0c1c7e0e0f8c7e0e0f/tenor.gif')"; // Замените на вашу гифку

    const rand = (min, max) => Math.random() * (max - min) + min;
    const pick = arr => arr[Math.floor(Math.random() * arr.length)];

    function doFlash() {
        flash.classList.add('active');
        setTimeout(() => flash.classList.remove('active'), 140);
    }

    function createParticle(cxVw, cyVh) {
        const el = document.createElement('div');
        el.className = 'particle';
        el.textContent = pick(glyphs);

        const angle = rand(0, Math.PI * 2);
        const distance = rand(90, 220);
        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance;
        const size = rand(16, 30);
        const dur = rand(900, 1700);
        const rot = (Math.random() < 0.6 ? rand(-120, 120) : rand(-220, 220)) + 'deg';

        el.style.left = cxVw + 'vw';
        el.style.top = cyVh + 'vh';
        el.style.fontSize = size + 'px';
        el.style.setProperty('--dx', dx.toFixed(1) + 'px');
        el.style.setProperty('--dy', dy.toFixed(1) + 'px');
        el.style.setProperty('--rot', rot);
        el.style.setProperty('--dur', dur + 'ms');

        document.body.appendChild(el);
        setTimeout(() => el.remove(), dur + 40);
    }

    function burst() {
        const cx = rand(15, 85);
        const cy = rand(18, 60);
        const count = Math.floor(rand(14, 26));

        doFlash();
        for (let i = 0; i < count; i++) {
            const jx = cx + rand(-1.6, 1.6);
            const jy = cy + rand(-1.6, 1.6);
            setTimeout(() => createParticle(jx, jy), i * 6);
        }
    }

    function startShow() {
        if (running) return;
        running = true;
        const original = btn.textContent;
        btn.disabled = true;
        btn.textContent = '✨ Ты пидорас! ✨';

        // Меняем фон на новый
        rootStyle.setProperty('--bg-url', newBgUrl);

        // Воспроизвести оба звука
        sound1.currentTime = 0;
        sound2.currentTime = 0;
        sound1.play().catch(e => console.warn('Ошибка воспроизведения первого звука:', e));
        sound2.play().catch(e => console.warn('Ошибка воспроизведения второго звука:', e));
        sound3.play().catch(e => console.warn('Ошибка воспроизведения второго звука:', e));

        burst();
        burstTimer = setInterval(burst, 850);

        setTimeout(() => {
            clearInterval(burstTimer);
            burstTimer = null;
            running = false;
            btn.disabled = false;
            btn.textContent = original;

            // Возвращаем исходный фон
            rootStyle.setProperty('--bg-url', originalBg);
        }, 12000);
    }

    btn.addEventListener('click', startShow);
</script>
</body>
</html>
